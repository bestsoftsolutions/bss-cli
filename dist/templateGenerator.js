import*as r from'fs';import*as o from'path';import {Eta}from'eta';function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}const l=new Eta({useWith:true});function m(e,n,t){r.existsSync(n)||r.mkdirSync(n,{recursive:true});const p=r.readdirSync(e,{withFileTypes:true});for(const i of p){let a=i.name;for(const[g,f]of Object.entries(t))a=a.replace(new RegExp(g,"g"),f);const c=o.join(e,i.name);let s=o.join(n,a.replace(/\.eta$/,""));if(i.isDirectory())m(c,s,t);else if(i.isFile())if(i.name.endsWith(".eta")){const g=r.readFileSync(c,"utf-8"),f=l.renderString(g,t)??"";r.writeFileSync(s,f,"utf-8");}else r.writeFileSync(s,"","utf-8");}}function w(e,n,t){m(e,n,{__module__:t,__Module__:_(t),__MODULE__:t.toUpperCase()});}function x(e,n,t){m(e,n,{__page__:t,__Page__:_(t),__PAGE__:t.toUpperCase()});}function y(e,n){return l.configure({views:o.dirname(e)}),l.renderString(r.readFileSync(e,"utf-8"),n)??""}async function F(e,n,t,p){const i=o.dirname(n),a=o.basename(n);let c=o.basename(n);for(const[f,u]of Object.entries(p))c=c.replace(new RegExp(f,"g"),u);let s=o.join(i,c.replace(/\.eta$/,""));r.existsSync(i)||r.mkdirSync(i,{recursive:true}),r.existsSync(s)&&console.warn(`\u26A0\uFE0F  Warning: Overwriting existing file at ${s}`),a.endsWith(".eta")&&(s=s.replace(/\.eta$/,""));const g=y(e,{...p,...t});r.writeFileSync(s,g,"utf-8");}export{y as compileTemplate,m as copyTemplateStructure,w as generateModuleFromTemplate,x as generatePageFromTemplate,F as writeCompiledTemplate};