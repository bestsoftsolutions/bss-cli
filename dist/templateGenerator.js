import*as r from'fs';import*as o from'path';import {Eta}from'eta';function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}const l=new Eta({useWith:true});function m(e,n,t){r.existsSync(n)||r.mkdirSync(n,{recursive:true});const f=r.readdirSync(e,{withFileTypes:true});for(const i of f){let a=i.name;for(const[p,g]of Object.entries(t))a=a.replace(new RegExp(p,"g"),g);const c=o.join(e,i.name);let s=o.join(n,a.replace(/\.eta$/,""));if(i.isDirectory())m(c,s,t);else if(i.isFile())if(i.name.endsWith(".eta")){const p=r.readFileSync(c,"utf-8"),g=l.renderString(p,t)??"";r.writeFileSync(s,g,"utf-8");}else r.writeFileSync(s,"","utf-8");}}function x(e,n,t){m(e,n,{__module__:t,__Module__:_(t),__MODULE__:t.toUpperCase()});}function R(e,n,t){m(e,n,{__page__:t,__Page__:_(t),__PAGE__:t.toUpperCase()});}function S(e,n){return l.configure({views:o.dirname(e)}),l.renderString(r.readFileSync(e,"utf-8"),n)??""}async function T(e,n,t,f){const i=o.dirname(n),a=o.basename(n);let c=o.basename(n);for(const[u,d]of Object.entries(f))c=c.replace(new RegExp(u,"g"),d);let s=o.join(i,c.replace(/\.eta$/,""));r.existsSync(i)||r.mkdirSync(i,{recursive:true}),r.existsSync(s)&&console.warn(`\u26A0\uFE0F  Warning: Overwriting existing file at ${s}`),a.endsWith(".eta")&&(s=s.replace(/\.eta$/,""));const g=S(e,{...f,CURRENT_PATH:i,...t});r.writeFileSync(s,g,"utf-8");}export{S as compileTemplate,m as copyTemplateStructure,x as generateModuleFromTemplate,R as generatePageFromTemplate,T as writeCompiledTemplate};